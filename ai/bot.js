window.importAI = function importAI (intelligence) {
    // return // return if learning mode

    var Runner = window.Runner
    var r = Runner.instance_
    var common = window.common

    var init = null

    // get neural network from "node ga.js"
    if (!intelligence) {
        /* intelligence = [ // high score: 1079
            10.26005347976526,24.938240489091257,47.80689387384796,144.9304691519007,-44.5710961332159,18.772760717821207,
            15.237617582615243,24.47709260601591,-30.381527194252577,-4.890358503188111,-58.37024657043811,29.904150262659165,
            -45.41902169766978,-157.62232655852574,30.64116990320354,-0.0895756588350114,-64.73398669740457,-43.86716107810095,
            -92.37045934161829,-65.32738157745494,49.57640919757398,-53.6376910762972,61.321848785532495,-82.71136152592926,
            -127.90769346684272,-42.493054826202,137.47851598559018,-127.2079107167646,21.89899437922582,7.504458853000354,
            -12.97917689831828,-55.6508839419878,-6.646088394372697,-54.16279957959003,37.50359833022271,72.82050898058485
        ] */
        intelligence = [ // high score: 7403
            -95.56601421853227,-85.36168246829185,5.473159957604986,-2.2524794626783855,4.720944891882393,-7.4916691544085925,
            3.7000145778189877,40.06859910598944,53.29819896989174,-44.78287614646953,66.270631606874,-30.201819957694955,
            78.24397239483471,-16.543948021956993,67.37003637242792,1.5497033889439737,26.561100252678365,-22.206257738432278,
            37.585476245910534,-24.108646500703816,5.2506611682817885,22.481568269598057,-12.369921294821879,-26.53789634952111,
            -96.61362135206807,-17.173819147522376,-122.38731979320482,26.08437453924002,6.4443673674408,-124.88919981892785,
            10.603237872543774,-59.743113935904965,-5.817672852185882,30.60677704355442,-17.32040578223058,-6.90005628155993
        ]
    }

    var neuralNetwork = common.generateIntelligence(intelligence)

    setInterval(function () {
        if (r && init === null) {
            r.startGame()
            r.playIntro()
            init = false
        } else if (init === false && r.playingIntro === false) {
            r.tRex.startJump(r.currentSpeed)
            init = true
        } else if (init && !r.playing) {
            r.restart()
        } else if (init) {
            if (!r.tRex.jumping) {
                var inputs = common.getInputs(r)
                var shouldJump = common.shouldJump(neuralNetwork, inputs)
                if (shouldJump) {
                    r.tRex.startJump(r.currentSpeed)
                }
            }
        }
    }, 100)
}

document.addEventListener('DOMContentLoaded', importAI)
